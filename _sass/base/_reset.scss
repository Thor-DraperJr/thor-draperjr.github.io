// Modern CSS Reset and Base Styles
// Optimized for performance and accessibility

// Import design tokens
@import 'tokens/colors';
@import 'tokens/typography';
@import 'tokens/spacing';

// CSS Custom Properties for theming
:root {
  // Color scheme
  --color-primary: #{$primary};
  --color-secondary: #{$secondary};
  --color-accent: #{$accent};
  
  // Text colors
  --color-text-primary: #{$text-primary};
  --color-text-secondary: #{$text-secondary};
  --color-text-muted: #{$text-muted};
  
  // Background colors
  --color-bg-primary: #{$bg-primary};
  --color-bg-secondary: #{$bg-secondary};
  --color-bg-tertiary: #{$bg-tertiary};
  
  // Border colors
  --color-border: #{$border-color};
  --color-border-light: #{$border-color-light};
  
  // Typography
  --font-family-sans: #{$font-family-sans};
  --font-family-mono: #{$font-family-mono};
  --font-size-base: #{$font-size-base};
  --line-height-base: #{$line-height-normal};
  
  // Spacing
  --spacing-unit: #{$spacing-unit};
  --content-padding: #{$content-padding};
  --section-spacing: #{$section-spacing};
}

// Dark mode custom properties
@media (prefers-color-scheme: dark) {
  :root {
    --color-text-primary: #{$dark-text};
    --color-text-secondary: #{$dark-text-secondary};
    --color-bg-primary: #{$dark-bg};
    --color-bg-secondary: #{$dark-bg-secondary};
    --color-border: #{$dark-border};
  }
}

// Modern CSS Reset
*,
*::before,
*::after {
  box-sizing: border-box;
}

* {
  margin: 0;
  padding: 0;
}

html {
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
  scroll-behavior: smooth;
}

body {
  font-family: var(--font-family-sans);
  font-size: var(--font-size-base);
  line-height: var(--line-height-base);
  color: var(--color-text-primary);
  background-color: var(--color-bg-primary);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

// Focus management for accessibility
:focus {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

:focus:not(:focus-visible) {
  outline: none;
}

// Typography base styles
h1, h2, h3, h4, h5, h6 {
  font-family: $heading-font-family;
  font-weight: $heading-font-weight;
  line-height: $heading-line-height;
  letter-spacing: $heading-letter-spacing;
  color: var(--color-text-primary);
  margin-bottom: $spacing-4;
}

h1 { font-size: $h1-font-size; }
h2 { font-size: $h2-font-size; }
h3 { font-size: $h3-font-size; }
h4 { font-size: $h4-font-size; }
h5 { font-size: $h5-font-size; }
h6 { font-size: $h6-font-size; }

p {
  margin-bottom: $spacing-4;
  color: var(--color-text-primary);
}

// Links
a {
  color: var(--color-primary);
  text-decoration: none;
  transition: color 0.15s ease-in-out;
  
  &:hover {
    color: var(--color-secondary);
    text-decoration: underline;
  }
  
  &:focus {
    text-decoration: underline;
  }
}

// Lists
ul, ol {
  margin-bottom: $spacing-4;
  padding-left: $spacing-6;
}

li {
  margin-bottom: $spacing-2;
}

// Code elements (important for technical content)
code {
  font-family: $code-font-family;
  font-size: 0.875em;
  background-color: $code-bg;
  border: 1px solid $code-border;
  border-radius: $border-radius-sm;
  padding: 0.125rem 0.25rem;
  color: $code-text;
}

pre {
  font-family: $code-font-family;
  background-color: $code-bg;
  border: 1px solid $code-border;
  border-radius: $border-radius-md;
  padding: $spacing-4;
  margin-bottom: $spacing-4;
  overflow-x: auto;
  
  code {
    background: none;
    border: none;
    padding: 0;
    font-size: 0.9em;
  }
}

// Images and media
img {
  max-width: 100%;
  height: auto;
  border-radius: $border-radius-md;
}

// Tables (for technical documentation)
table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: $spacing-4;
  
  th, td {
    padding: $spacing-3 $spacing-4;
    text-align: left;
    border-bottom: 1px solid var(--color-border);
  }
  
  th {
    font-weight: $font-weight-semibold;
    color: var(--color-text-primary);
    background-color: var(--color-bg-secondary);
  }
}

// Responsive typography
@media (max-width: $breakpoint-md) {
  h1 { font-size: $h1-font-size-mobile; }
  h2 { font-size: $h2-font-size-mobile; }
  h3 { font-size: $h3-font-size-mobile; }
  h4 { font-size: $h4-font-size-mobile; }
}

// Utility classes
.visually-hidden {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

.container {
  max-width: $max-content-width;
  margin: 0 auto;
  padding: 0 var(--content-padding);
}

.container-wide {
  max-width: $max-wide-width;
  margin: 0 auto;
  padding: 0 var(--content-padding);
}
